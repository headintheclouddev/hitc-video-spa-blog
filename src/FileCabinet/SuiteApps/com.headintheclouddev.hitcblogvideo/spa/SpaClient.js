define(["exports","@uif-js/core/jsx-runtime","@uif-js/core","N","@uif-js/component"],(function(e,t,o,r,s){"use strict";const n=o.ContextType.new("theme-context");function i(e){const{secondaryColor:r}=o.useContext(n);return t.jsxs("div",{children:[t.jsx("h3",{style:{color:r},children:e.title}),t.jsx("div",{children:e.content}),t.jsx("br",{}),t.jsxs("i",{children:["Written by ",t.jsx("b",{children:e.author})]})]})}function c(){const e=o.useSelector((e=>e.posts)),r=[];for(const s of e)r.push(t.jsxs(o.VDom.Fragment,{children:[t.jsx(i,{...s}),t.jsx("hr",{})]}));return t.jsx("div",{children:r})}function l(e){return t.jsxs("span",{onClick:e.onClick,style:{cursor:"pointer",paddingLeft:"8px",fontWeight:e.active?"bold":"normal"},children:[t.jsx("span",{style:{color:e.theme.primaryColor},children:"Primary"})," / ",t.jsx("span",{style:{color:e.theme.secondaryColor},children:"Secondary"})]})}function u(e){const[s,n]=o.useState([]);function i(t){return t.primaryColor==e.theme.primaryColor&&t.secondaryColor==e.theme.secondaryColor}return o.useEffect((()=>{r.query.runSuiteQL.promise({query:"SELECT name, id, custrecord_blog_theme_secondary_color FROM customrecord_blog_theme"}).then((e=>{const t=e.asMappedResults(),o=[];for(const e of t)o.push({id:e.id,primaryColor:e.name,secondaryColor:e.custrecord_blog_theme_secondary_color});n(o),console.log("ChangedTheme found",t.length,"themes")}))}),[]),t.jsxs("div",{children:["Change Theme:",s.map((o=>t.jsx(l,{theme:o,active:i(o),onClick:()=>e.setTheme(o)})))]})}const a={CREATE_POST:Symbol("createPost"),FETCH_POSTS:Symbol("fetchPosts"),USER_REGISTER:Symbol("userRegister"),USER_LOGIN:Symbol("userLogin"),USER_LOGOUT:Symbol("userLogout")},x={createPost:(e,t,o)=>({type:a.CREATE_POST,id:0,title:e,content:t,author:o}),fetchPosts:()=>({type:a.FETCH_POSTS,posts:[{author:"Robbie",title:"Test Post 1",content:"It is a beautiful day to be a NetSuite developer!"},{author:"Robbie",title:"Test Post 2",content:"Looking forward to SuiteWorld 2026."}]}),userRegister:(e,t)=>({type:a.USER_REGISTER,username:e}),userLogin:(e,t)=>({type:a.USER_LOGIN,username:e}),userLogout:()=>({type:a.USER_LOGOUT})};function d(){const[e,r]=o.useState(""),[n,i]=o.useState(""),c=o.useDispatch(),l={[s.TextBox.Event.TEXT_CHANGED]:({text:e})=>{r(e)}};return t.jsxs("div",{children:[t.jsx("label",{htmlFor:"login-username",children:"Username:"}),t.jsx(s.TextBox,{type:s.TextBox.Type.TEXT,name:"login-username",text:e,on:l}),t.jsx("label",{htmlFor:"login-password",children:"Password:"}),t.jsx(s.TextBox,{type:s.TextBox.Type.PASSWORD,name:"login-password",text:n,onTextChanged:function(e){i(e.text)}}),t.jsx("input",{type:"button",value:"Login",onClick:function(){console.log("handleLogin running"),e&&n&&c(x.userLogin(e,n))}})]})}function h(){return t.jsxs("div",{children:[t.jsx("label",{htmlFor:"register-username",children:"Username:"}),t.jsx(s.TextBox,{type:s.TextBox.Type.TEXT,name:"register-username"}),t.jsx("label",{htmlFor:"register-password",children:"Password:"}),t.jsx(s.TextBox,{type:s.TextBox.Type.PASSWORD,name:"register-password"}),t.jsx("label",{htmlFor:"register-repeat-password",children:"Repeat Password:"}),t.jsx(s.TextBox,{type:s.TextBox.Type.PASSWORD,name:"register-reeat-password"}),t.jsx("input",{type:"button",value:"Register",onClick:function(){console.log("handleRegister running")}})]})}function p(){return t.jsxs(o.VDom.Fragment,{children:[t.jsx(d,{}),t.jsx(h,{})]})}function m(e,t){return{user:T(e.user,t),posts:y(e.posts,t),error:""}}function T(e,t){switch(t.type){case a.USER_LOGIN:case a.USER_REGISTER:return t.username;case a.USER_LOGOUT:return"";default:return e}}function y(e,t){if(t.type==a.CREATE_POST){return[{title:t.title,content:t.content,author:t.author},...e]}return t.type==a.FETCH_POSTS?t.posts:e}function j(){const[e,r]=o.useState(""),[n,i]=o.useState(""),c=o.useDispatch(),l=o.useSelector((e=>e.user));if(!l)return t.jsx("p",{children:"Please log in to create a post."});return t.jsxs("div",{children:[t.jsxs("div",{children:["Author: ",t.jsx("b",{children:l})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"create-title",children:"Title:"}),t.jsx(s.TextBox,{type:s.TextBox.Type.TEXT,name:"create-title",text:e,onTextChanged:function(e){console.log("handleTitle"),r(e.text)}})]}),t.jsx(s.TextArea,{text:n,onTextChanged:function(e){console.log("handleContent"),i(e.text)}}),t.jsx("input",{type:"button",value:"Create",onClick:function(){e&&n&&c(x.createPost(e,n,l))}})]})}function S(){const[e,r]=o.useState({user:"",posts:[],error:""}),s=o.useMemo((()=>o.Store.create({reducer:m,state:e,onStateChanged:({currentState:e})=>r(e)})));o.useEffect((()=>s.subscribe((()=>r(s.getState())))),[]),o.useEffect((()=>{console.log("useEffect - fetchPosts",new Date),s.dispatch(x.fetchPosts())}),[]);const[i,l]=o.useState({primaryColor:"deepskyblue",secondaryColor:"coral"}),a={[n]:i};return t.jsx(o.Store.Provider,{store:s,children:t.jsx(o.VDom.Context,{value:a,children:t.jsxs("div",{children:[t.jsx("h1",{style:{color:i.primaryColor},children:"NetSuite Blog"}),t.jsx(u,{theme:i,setTheme:l}),t.jsx(p,{}),t.jsx(j,{}),t.jsx(c,{})]})})})}e.run=function(e){console.log("SpaClient - run context",e),e.setLayout("application"),e.setContent(t.jsx(S,{}))}}));
